# ISO 安装交付总览

## 1. 概述

将整个 Novasphere 应用栈打包到 Ubuntu ISO 中，实现一键安装交付。

## 2. 目标

- ✅ 自动化安装整个技术栈
- ✅ 预配置系统环境
- ✅ 包含所有依赖组件
- ✅ 支持离线安装
- ✅ 简化部署流程

## 3. 文档结构

1. **[01-ISO制作方案.md](./01-ISO制作方案.md)** - ISO 制作工具和流程
2. **[02-系统镜像定制.md](./02-系统镜像定制.md)** - Ubuntu 系统镜像定制
3. **[03-预安装脚本概述.md](./03-预安装脚本概述.md)** - 预安装脚本概述
4. **[03.1-系统环境准备脚本.md](./03.1-系统环境准备脚本.md)** - 系统环境准备脚本
5. **[03.2-k3s安装脚本.md](./03.2-k3s安装脚本.md)** - k3s 安装脚本
6. **[03.3-存储安装脚本.md](./03.3-存储安装脚本.md)** - Longhorn 安装脚本
7. **[03.4-网络组件安装脚本.md](./03.4-网络组件安装脚本.md)** - Multus 和 NMState 安装脚本
8. **[03.5-虚拟化平台安装脚本.md](./03.5-虚拟化平台安装脚本.md)** - KubeVirt 和 CDI 安装脚本
9. **[03.6-应用安装脚本.md](./03.6-应用安装脚本.md)** - Novasphere Operator 安装脚本
10. **[03.7-主安装脚本.md](./03.7-主安装脚本.md)** - 主安装流程编排
11. **[04-应用安装脚本设计.md](./04-应用安装脚本设计.md)** - 应用安装脚本设计（参考）
12. **[05-配置文件管理.md](./05-配置文件管理.md)** - 配置文件和模板管理
13. **[06-依赖包管理.md](./06-依赖包管理.md)** - 离线依赖包管理
14. **[07-安装流程设计.md](./07-安装流程设计.md)** - 完整安装流程
15. **[08-验证与测试.md](./08-验证与测试.md)** - 安装验证和测试
16. **[09-ISO发布流程.md](./09-ISO发布流程.md)** - ISO 构建和发布流程

## 4. 技术栈

ISO 需要包含：

- **Ubuntu 22.04 LTS** - 基础操作系统
- **k3s** - Kubernetes 发行版
- **KubeVirt** - 虚拟机管理
- **CDI** - 数据导入
- **Multus CNI** - 多网络
- **NMState Operator** - 网络配置
- **Longhorn** - 分布式存储
- **cert-manager** - 证书管理（可选）
- **Novasphere Operator** - 业务应用

## 5. 安装方式

### 5.1 自动安装
- 无人值守安装
- 预配置所有组件
- 自动启动服务

### 5.2 交互式安装
- 用户选择安装选项
- 自定义配置
- 分步安装

## 6. ISO 结构

```
novasphere-installer.iso
├── boot/                    # 引导文件
├── casper/                  # Ubuntu 文件系统
├── preseed/                 # 自动安装配置
├── novasphere/              # 应用文件
│   ├── scripts/            # 安装脚本
│   ├── configs/            # 配置文件
│   ├── packages/           # 离线包
│   └── charts/             # Helm Charts
└── isolinux/                # ISO 引导配置
```

## 7. 快速开始

### 7.1 制作 ISO
```bash
./scripts/build-iso.sh
```

### 7.2 安装系统
1. 从 ISO 启动
2. 选择安装模式
3. 等待自动安装完成

### 7.3 验证安装
```bash
./scripts/verify-installation.sh
```

## 8. 优势

- ✅ 一键安装整个系统
- ✅ 离线安装支持
- ✅ 版本一致性保证
- ✅ 简化部署流程
- ✅ 标准化交付

